{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import\"./Home.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){var _JSON$parse;const[search,setSearch]=useState(\"\");const[filteredBooks,setFilteredBooks]=useState([]);const[books,setBooks]=useState([]);const searchRef=useRef(null);const navigate=useNavigate();const BACKENDURL=process.env.REACT_APP_BACKEND_URL;// ‚úÖ Fetch all books from MongoDB\nuseEffect(()=>{axios.get(\"\".concat(BACKENDURL,\"/api/books\")).then(res=>setBooks(res.data)).catch(err=>console.error(\"Error fetching books:\",err));},[]);useEffect(()=>{searchRef.current.focus();},[]);// ‚úÖ Filter search results from MongoDB data\nuseEffect(()=>{if(search.trim()===\"\"){setFilteredBooks([]);return;}const filtered=books.filter(book=>book.title.toLowerCase().includes(search.toLowerCase()));setFilteredBooks(filtered);},[search,books]);// ‚úÖ Static Featured Books\nconst featuredBooks=[{title:\"The Great Gatsby\",author:\"F. Scott Fitzgerald\",cover:\"https://m.media-amazon.com/images/I/81af+MCATTL.jpg\"},{title:\"Rich Dad Poor Dad\",author:\"Robert Kiyosaki\",cover:\"https://m.media-amazon.com/images/I/71UypkUjStL.jpg\"},{title:\"1984\",author:\"George Orwell\",cover:\"https://m.media-amazon.com/images/I/71kxa1-0mfL.jpg\"},{title:\"India That is Bharat\",author:\"J Sai Deepak\",cover:\"india.jpg\"},{title:\"The Hobbit\",author:\"J.R.R. Tolkien\",cover:\"https://m.media-amazon.com/images/I/91b0C2YNSrL.jpg\"},{title:\"Harry Potter\",author:\"J.K. Rowling\",cover:\"https://m.media-amazon.com/images/I/81YOuOGFCJL.jpg\"}];const handleLogout=()=>{localStorage.removeItem('user');localStorage.removeItem('token');alert(\"Logout Successfully!\");navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"\\uD83D\\uDCDA ReadMate\"}),localStorage.getItem('user')&&/*#__PURE__*/_jsxs(\"div\",{children:[\"  Hii, \",(_JSON$parse=JSON.parse(localStorage.getItem('user')))===null||_JSON$parse===void 0?void 0:_JSON$parse.email]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/categories\",children:\"Categories\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/about\",children:\"About\"})}),localStorage.getItem(\"user\")?/*#__PURE__*/_jsx(\"li\",{onClick:handleLogout,children:\"Logout\"}):/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Sign In\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"main-heading\",children:\"Which book do you want to read?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Lost in choices? Explore our handpicked collection and find your next great read!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"explore-btn\",onClick:()=>navigate(\"/explore\"),children:\"Explore \\u2192\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-section\",children:[/*#__PURE__*/_jsx(\"input\",{ref:searchRef,type:\"text\",placeholder:\"Search for a book...\",value:search,onChange:e=>setSearch(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{children:\"Search\"})]}),search.trim()&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Search Results\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:filteredBooks.length>0?filteredBooks.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.image,alt:book.title,onError:e=>e.target.src=\"https://via.placeholder.com/150\"}),/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",book.author]}),/*#__PURE__*/_jsx(Link,{to:\"/book/\".concat(book._id),children:/*#__PURE__*/_jsx(\"button\",{children:\"Read More\"})})]},book._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No books found.\"})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"section-heading\",children:\"Featured Books\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:featuredBooks.map((book,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.cover,alt:book.title}),/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",book.author]}),/*#__PURE__*/_jsx(\"button\",{children:\"Read More\"})]},index))})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_JSON$parse","search","setSearch","filteredBooks","setFilteredBooks","books","setBooks","searchRef","navigate","BACKENDURL","process","env","REACT_APP_BACKEND_URL","get","concat","then","res","data","catch","err","console","error","current","focus","trim","filtered","filter","book","title","toLowerCase","includes","featuredBooks","author","cover","handleLogout","localStorage","removeItem","alert","className","children","getItem","JSON","parse","email","to","onClick","ref","type","placeholder","value","onChange","e","target","length","map","src","image","alt","onError","_id","index"],"sources":["C:/Users/kavik/Downloads/nileshProject/book-review/frontend/src/pages/Home.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./Home.css\";\r\n\r\nfunction Home() {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [filteredBooks, setFilteredBooks] = useState([]);\r\n  const [books, setBooks] = useState([]);\r\n  const searchRef = useRef(null);\r\n  const navigate = useNavigate();\r\n  const BACKENDURL = process.env.REACT_APP_BACKEND_URL;\r\n\r\n  // ‚úÖ Fetch all books from MongoDB\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BACKENDURL}/api/books`)\r\n      .then((res) => setBooks(res.data))\r\n      .catch((err) => console.error(\"Error fetching books:\", err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    searchRef.current.focus();\r\n  }, []);\r\n\r\n  // ‚úÖ Filter search results from MongoDB data\r\n  useEffect(() => {\r\n    if (search.trim() === \"\") {\r\n      setFilteredBooks([]);\r\n      return;\r\n    }\r\n\r\n    const filtered = books.filter((book) =>\r\n      book.title.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n    setFilteredBooks(filtered);\r\n  }, [search, books]);\r\n\r\n  // ‚úÖ Static Featured Books\r\n  const featuredBooks = [\r\n    { title: \"The Great Gatsby\", author: \"F. Scott Fitzgerald\", cover: \"https://m.media-amazon.com/images/I/81af+MCATTL.jpg\" },\r\n    { title: \"Rich Dad Poor Dad\", author: \"Robert Kiyosaki\", cover: \"https://m.media-amazon.com/images/I/71UypkUjStL.jpg\" },\r\n    { title: \"1984\", author: \"George Orwell\", cover: \"https://m.media-amazon.com/images/I/71kxa1-0mfL.jpg\" },\r\n    { title: \"India That is Bharat\", author: \"J Sai Deepak\", cover: \"india.jpg\" },\r\n    { title: \"The Hobbit\", author: \"J.R.R. Tolkien\", cover: \"https://m.media-amazon.com/images/I/91b0C2YNSrL.jpg\" },\r\n    { title: \"Harry Potter\", author: \"J.K. Rowling\", cover: \"https://m.media-amazon.com/images/I/81YOuOGFCJL.jpg\" }\r\n  ];\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user')\r\n    localStorage.removeItem('token')\r\n    alert(\"Logout Successfully!\")\r\n    navigate('/')\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {/* Navbar */}\r\n      <nav className=\"navbar\">\r\n        <div className=\"logo\">üìö ReadMate</div>\r\n       { localStorage.getItem('user') && <div>  Hii, { JSON.parse(localStorage.getItem('user'))?.email}</div>}\r\n        <ul>\r\n          <li><Link to=\"/\">Home</Link></li>\r\n          <li><Link to=\"/categories\">Categories</Link></li>\r\n          <li><Link to=\"/about\">About</Link></li>\r\n         { localStorage.getItem(\"user\") ? <li onClick={handleLogout} >Logout</li>  : <li><Link to=\"/signin\">Sign In</Link></li> }\r\n        </ul>\r\n      </nav>\r\n\r\n      {/* Hero Section */}\r\n      <div className=\"content\">\r\n        <h1 className=\"main-heading\">Which book do you want to read?</h1>\r\n        <p>Lost in choices? Explore our handpicked collection and find your next great read!</p>\r\n        <button className=\"explore-btn\" onClick={() => navigate(\"/explore\")}>\r\n          Explore ‚Üí\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Section */}\r\n      <div className=\"search-section\">\r\n        <input\r\n          ref={searchRef}\r\n          type=\"text\"\r\n          placeholder=\"Search for a book...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n        <button>Search</button>\r\n      </div>\r\n\r\n      {/* üîç Search Results */}\r\n      {search.trim() && (\r\n        <>\r\n          <h2 className=\"section-heading\">Search Results</h2>\r\n          <div className=\"card-container\">\r\n            {filteredBooks.length > 0 ? (\r\n              filteredBooks.map((book) => (\r\n                <div key={book._id} className=\"card\">\r\n                  <img\r\n                    src={book.image}\r\n                    alt={book.title}\r\n                    onError={(e) => (e.target.src = \"https://via.placeholder.com/150\")}\r\n                  />\r\n                  <h3>{book.title}</h3>\r\n                  <p>by {book.author}</p>\r\n                  <Link to={`/book/${book._id}`}>\r\n                    <button>Read More</button>\r\n                  </Link>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <p>No books found.</p>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* ‚≠ê Featured Books Section */}\r\n      <h2 className=\"section-heading\">Featured Books</h2>\r\n      <div className=\"card-container\">\r\n        {featuredBooks.map((book, index) => (\r\n          <div key={index} className=\"card\">\r\n            <img src={book.cover} alt={book.title} />\r\n            <h3>{book.title}</h3>\r\n            <p>by {book.author}</p>\r\n            <button>Read More</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}